<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Python 3.10 安装 | Sivan Page</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="Just playing around">
    
    <link rel="preload" href="/assets/css/0.styles.8f3dca9f.css" as="style"><link rel="preload" href="/assets/js/app.4e56e56e.js" as="script"><link rel="preload" href="/assets/js/2.3dc1b8de.js" as="script"><link rel="preload" href="/assets/js/1.7f771cfb.js" as="script"><link rel="preload" href="/assets/js/29.91511347.js" as="script"><link rel="prefetch" href="/assets/js/10.23a1f579.js"><link rel="prefetch" href="/assets/js/11.c389195a.js"><link rel="prefetch" href="/assets/js/12.1d996921.js"><link rel="prefetch" href="/assets/js/13.4d4410c4.js"><link rel="prefetch" href="/assets/js/14.37ef2a72.js"><link rel="prefetch" href="/assets/js/15.5542c093.js"><link rel="prefetch" href="/assets/js/16.d48fd1ce.js"><link rel="prefetch" href="/assets/js/17.bd8d538c.js"><link rel="prefetch" href="/assets/js/18.6d3b94c1.js"><link rel="prefetch" href="/assets/js/19.eb35cfee.js"><link rel="prefetch" href="/assets/js/20.c11ec329.js"><link rel="prefetch" href="/assets/js/21.db1b5d88.js"><link rel="prefetch" href="/assets/js/22.6916f4ef.js"><link rel="prefetch" href="/assets/js/23.79c4ee49.js"><link rel="prefetch" href="/assets/js/24.f176594d.js"><link rel="prefetch" href="/assets/js/25.00acdf15.js"><link rel="prefetch" href="/assets/js/26.9b34ee88.js"><link rel="prefetch" href="/assets/js/27.2a70b75b.js"><link rel="prefetch" href="/assets/js/28.d18ecdb6.js"><link rel="prefetch" href="/assets/js/3.5322f14a.js"><link rel="prefetch" href="/assets/js/30.1fba689d.js"><link rel="prefetch" href="/assets/js/4.84e1e480.js"><link rel="prefetch" href="/assets/js/5.f0541060.js"><link rel="prefetch" href="/assets/js/6.dfb06aa0.js"><link rel="prefetch" href="/assets/js/7.7551a9fb.js"><link rel="prefetch" href="/assets/js/vendors~docsearch.5e19b665.js">
    <link rel="stylesheet" href="/assets/css/0.styles.8f3dca9f.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Sivan Page</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/Python3.10安装.html" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/MySQL简介.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/sql_server/" class="nav-link">
  SQL Server
</a></li><li class="dropdown-item"><!----> <a href="/pg/PostgreSQL简介.html" class="nav-link">
  PostgreSQL
</a></li><li class="dropdown-item"><!----> <a href="/ha/数据库高可用部署.html" class="nav-link">
  HA
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/Linux简介.html" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow down"></span></button> <button type="button" aria-label="文章" class="mobile-dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/translation/" class="nav-link">
  翻译
</a></li><li class="dropdown-item"><!----> <a href="/day_log/" class="nav-link">
  杂记
</a></li><li class="dropdown-item"><!----> <a href="/write_log/随笔.html" class="nav-link">
  随笔
</a></li></ul></div></div><div class="nav-item"><a href="/me/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="https://github.com/4everSivan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="编程语言" class="dropdown-title"><span class="title">编程</span> <span class="arrow down"></span></button> <button type="button" aria-label="编程语言" class="mobile-dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/python/Python3.10安装.html" class="nav-link">
  Python
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="数据库" class="dropdown-title"><span class="title">数据库</span> <span class="arrow down"></span></button> <button type="button" aria-label="数据库" class="mobile-dropdown-title"><span class="title">数据库</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/mysql/MySQL简介.html" class="nav-link">
  MySQL
</a></li><li class="dropdown-item"><!----> <a href="/sql_server/" class="nav-link">
  SQL Server
</a></li><li class="dropdown-item"><!----> <a href="/pg/PostgreSQL简介.html" class="nav-link">
  PostgreSQL
</a></li><li class="dropdown-item"><!----> <a href="/ha/数据库高可用部署.html" class="nav-link">
  HA
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="运维" class="dropdown-title"><span class="title">运维</span> <span class="arrow down"></span></button> <button type="button" aria-label="运维" class="mobile-dropdown-title"><span class="title">运维</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/linux/Linux简介.html" class="nav-link">
  Linux
</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="文章" class="dropdown-title"><span class="title">文章</span> <span class="arrow down"></span></button> <button type="button" aria-label="文章" class="mobile-dropdown-title"><span class="title">文章</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/translation/" class="nav-link">
  翻译
</a></li><li class="dropdown-item"><!----> <a href="/day_log/" class="nav-link">
  杂记
</a></li><li class="dropdown-item"><!----> <a href="/write_log/随笔.html" class="nav-link">
  随笔
</a></li></ul></div></div><div class="nav-item"><a href="/me/" class="nav-link">
  关于我
</a></div><div class="nav-item"><a href="https://github.com/4everSivan" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><a href="/python/Python3.10安装" class="sidebar-heading clickable open active"><span>Python</span> <span class="arrow down"></span></a> <ul class="sidebar-links sidebar-group-items"><li><a href="/python/Python3.10安装.html" class="active sidebar-link">Python 3.10 安装</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/python/Python3.10安装.html#_1-更新openssl" class="sidebar-link">1. 更新openssl</a></li><li class="sidebar-sub-header"><a href="/python/Python3.10安装.html#_2-安装-python-3-10" class="sidebar-link">2. 安装 python 3.10</a></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/linux/Linux简介" class="sidebar-heading clickable"><span>Linux</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/pg/PostgreSQL简介" class="sidebar-heading clickable"><span>PostgreSQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/mysql/MySQL简介" class="sidebar-heading clickable"><span>MySQL</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/ha/数据库高可用部署" class="sidebar-heading clickable"><span>HA</span> <span class="arrow right"></span></a> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><a href="/write_log/随笔" class="sidebar-heading clickable"><span>随笔</span> <span class="arrow right"></span></a> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="python-3-10-安装"><a href="#python-3-10-安装" class="header-anchor">#</a> Python 3.10 安装</h1> <h2 id="_1-更新openssl"><a href="#_1-更新openssl" class="header-anchor">#</a> 1. 更新openssl</h2> <h3 id="_1-检查-openssl-版本"><a href="#_1-检查-openssl-版本" class="header-anchor">#</a> 1.检查 openssl 版本</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@mmrpatroni2 ~<span class="token punctuation">]</span><span class="token comment"># openssl version</span>
OpenSSL <span class="token number">1.0</span>.2k-fips  <span class="token number">26</span> Jan <span class="token number">2017</span>
</code></pre></div><h3 id="_2-安装下载新版本"><a href="#_2-安装下载新版本" class="header-anchor">#</a> 2. 安装下载新版本</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 下载 openssl</span>
<span class="token function">wget</span> https://www.openssl.org/source/openssl-1.1.1g.tar.gz --no-check-certificate
<span class="token comment"># 解压</span>
<span class="token function">tar</span> <span class="token parameter variable">-zxvf</span> openssl-1.1.1g.tar.gz
<span class="token builtin class-name">cd</span> openssl-1.1.1g/
<span class="token comment"># 编译安装</span>
./config <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/openssl
<span class="token function">make</span>
<span class="token function">make</span> <span class="token function">install</span>
</code></pre></div><h3 id="_3-备份和替换"><a href="#_3-备份和替换" class="header-anchor">#</a> 3. 备份和替换</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 备份当前机器的版本</span>
<span class="token function">mv</span> /usr/bin/openssl /usr/bin/openssl.old
<span class="token function">mv</span> /usr/include/openssl /usr/include/openssl.old
<span class="token comment"># 链接新版本</span>
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/openssl/bin/openssl /usr/bin/openssl
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/openssl/include/openssl /usr/include/openssl
<span class="token builtin class-name">echo</span> <span class="token string">&quot;/usr/local/openssl/lib&quot;</span> <span class="token operator">&gt;&gt;</span> /etc/ld.so.conf
ldconfig 
</code></pre></div><h3 id="_4-查看是否更新成功"><a href="#_4-查看是否更新成功" class="header-anchor">#</a> 4. 查看是否更新成功</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@mmrpatroni1 ~<span class="token punctuation">]</span><span class="token comment"># openssl version</span>
OpenSSL <span class="token number">1.1</span>.1g  <span class="token number">21</span> Apr <span class="token number">2020</span>
</code></pre></div><h2 id="_2-安装-python-3-10"><a href="#_2-安装-python-3-10" class="header-anchor">#</a> 2. 安装 python 3.10</h2> <h3 id="_1-下载python"><a href="#_1-下载python" class="header-anchor">#</a> 1. 下载python</h3> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">wget</span> https://www.python.org/ftp/python/3.10.11/Python-3.10.11.tgz --no-check-certificate
</code></pre></div><h3 id="_2-安装"><a href="#_2-安装" class="header-anchor">#</a> 2. 安装</h3> <ul><li>解压</li></ul> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token comment"># 解压</span>
<span class="token function">tar</span>	<span class="token parameter variable">-zxvf</span> Python-3.10.11.tgz
</code></pre></div><ul><li><p>有两种方式来指定 openssl 的安装路径：</p> <blockquote><p><strong>注意</strong>：使用 <code>--enable-optimizations</code> 参数可能会出现各种问题，不建议使用这个参数。</p></blockquote> <ol><li><p>修改 python 3.10路径下的Module/Setup 文件：</p> <ol><li><p>编辑 python 3.10解压路径下的 Module/Setup 文件：</p></li> <li><p>修改如下行的内容（取消注释掉这五行）：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token builtin class-name">cd</span> /opt/soft/python-3.10/
<span class="token function">vi</span> Module/Setup
<span class="token comment"># Socket module helper for socket(2)</span>
_socket socketmodule.c												<span class="token comment"># 大约在206行,</span>

<span class="token comment"># Socket module helper for SSL support; you must comment out the other</span>
<span class="token comment"># socket line above, and edit the OPENSSL variable:</span>
<span class="token assign-left variable">OPENSSL</span><span class="token operator">=</span>/usr/local/openssl										<span class="token comment"># 修改升级后的位置</span>
_ssl _ssl.c <span class="token punctuation">\</span>																	<span class="token comment"># 取消注释</span>
    -I<span class="token variable"><span class="token variable">$(</span>OPENSSL<span class="token variable">)</span></span>/include -L<span class="token variable"><span class="token variable">$(</span>OPENSSL<span class="token variable">)</span></span>/lib <span class="token punctuation">\</span>  	<span class="token comment"># 查看openssl安装路径下lib，如果为lib64则修改为lib64</span>
    <span class="token parameter variable">-lssl</span> <span class="token parameter variable">-lcrypto</span>														<span class="token comment"># 取消注释</span>
<span class="token comment">#_hashlib _hashopenssl.c \</span>
<span class="token comment">#     -I$(OPENSSL)/include -L$(OPENSSL)/lib \</span>
<span class="token comment">#     -lcrypto</span>
</code></pre></div></li> <li><p>正常编译安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/python/3.10/ --enable-shared
</code></pre></div></li></ol></li> <li><p>使用 <code>--with-openssl</code>  和<code>--with-openssl-rpath=auto</code> 来指定 openssl 的路径，方法如下：</p> <div class="language-shell extra-class"><pre class="language-shell"><code>./configure <span class="token parameter variable">--prefix</span><span class="token operator">=</span>/usr/local/python/3.10/ --with-openssl<span class="token operator">=</span>/usr/local/openssl/ --with-openssl-rpath<span class="token operator">=</span>auto --enable-shared
</code></pre></div></li></ol></li> <li><p>编译安装：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">make</span> <span class="token parameter variable">-j4</span> <span class="token operator">&amp;&amp;</span> <span class="token function">make</span> <span class="token function">install</span> <span class="token parameter variable">-j4</span>
</code></pre></div></li> <li><p>添加软连接：</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python/3.10/bin/python3. /usr/bin/python3
<span class="token function">ln</span> <span class="token parameter variable">-s</span> /usr/local/python3/3.10/bin/pip3 /usr/bin/pip3
<span class="token builtin class-name">echo</span> <span class="token string">&quot;/usr/local/python3/3.10/lib&quot;</span> <span class="token operator">&gt;</span>/etc/ld.so.conf.d/python3.conf
ldconfig
</code></pre></div></li> <li><p>测试</p> <div class="language-shell extra-class"><pre class="language-shell"><code><span class="token punctuation">[</span>root@mmrpatroni2 python-3.10<span class="token punctuation">]</span><span class="token comment"># python3 -V</span>
Python <span class="token number">3.10</span>.11

<span class="token comment"># 测试 openssl</span>
<span class="token punctuation">[</span>root@mmrpatroni2 python-3.10<span class="token punctuation">]</span><span class="token comment"># python3</span>
Python <span class="token number">3.10</span>.11 <span class="token punctuation">(</span>main, Apr <span class="token number">18</span> <span class="token number">2023</span>, 09:44:09<span class="token punctuation">)</span> <span class="token punctuation">[</span>GCC <span class="token number">4.8</span>.5 <span class="token number">20150623</span> <span class="token punctuation">(</span>Red Hat <span class="token number">4.8</span>.5-44<span class="token punctuation">)</span><span class="token punctuation">]</span> on linux
Type <span class="token string">&quot;help&quot;</span>, <span class="token string">&quot;copyright&quot;</span>, <span class="token string">&quot;credits&quot;</span> or <span class="token string">&quot;license&quot;</span> <span class="token keyword">for</span> <span class="token function">more</span> information.
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> ssl
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> <span class="token function">import</span> _ssl
<span class="token operator">&gt;&gt;</span><span class="token operator">&gt;</span> 
</code></pre></div></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><!----> <span class="next"><a href="/linux/Linux简介.html">
        What is Linux?
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.4e56e56e.js" defer></script><script src="/assets/js/2.3dc1b8de.js" defer></script><script src="/assets/js/1.7f771cfb.js" defer></script><script src="/assets/js/29.91511347.js" defer></script>
  </body>
</html>
