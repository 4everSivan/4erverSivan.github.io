(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{310:function(s,t,a){"use strict";a.r(t);var e=a(14),n=Object(e.a)({},(function(){var s=this,t=s._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"python-3-10-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#python-3-10-安装"}},[s._v("#")]),s._v(" Python 3.10 安装")]),s._v(" "),t("h2",{attrs:{id:"_1-更新openssl"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-更新openssl"}},[s._v("#")]),s._v(" 1. 更新openssl")]),s._v(" "),t("h3",{attrs:{id:"_1-检查-openssl-版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-检查-openssl-版本"}},[s._v("#")]),s._v(" 1.检查 openssl 版本")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mmrpatroni2 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# openssl version")]),s._v("\nOpenSSL "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.0")]),s._v(".2k-fips  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("26")]),s._v(" Jan "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2017")]),s._v("\n")])])]),t("h3",{attrs:{id:"_2-安装下载新版本"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装下载新版本"}},[s._v("#")]),s._v(" 2. 安装下载新版本")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 下载 openssl")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://www.openssl.org/source/openssl-1.1.1g.tar.gz --no-check-certificate\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" openssl-1.1.1g.tar.gz\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" openssl-1.1.1g/\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 编译安装")]),s._v("\n./config "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/openssl\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n")])])]),t("h3",{attrs:{id:"_3-备份和替换"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-备份和替换"}},[s._v("#")]),s._v(" 3. 备份和替换")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 备份当前机器的版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /usr/bin/openssl /usr/bin/openssl.old\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mv")]),s._v(" /usr/include/openssl /usr/include/openssl.old\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 链接新版本")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/openssl/bin/openssl /usr/bin/openssl\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/openssl/include/openssl /usr/include/openssl\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/openssl/lib"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" /etc/ld.so.conf\nldconfig \n")])])]),t("h3",{attrs:{id:"_4-查看是否更新成功"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-查看是否更新成功"}},[s._v("#")]),s._v(" 4. 查看是否更新成功")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mmrpatroni1 ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# openssl version")]),s._v("\nOpenSSL "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1g  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("21")]),s._v(" Apr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("\n")])])]),t("h2",{attrs:{id:"_2-安装-python-3-10"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装-python-3-10"}},[s._v("#")]),s._v(" 2. 安装 python 3.10")]),s._v(" "),t("h3",{attrs:{id:"_1-下载python"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-下载python"}},[s._v("#")]),s._v(" 1. 下载python")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("wget")]),s._v(" https://www.python.org/ftp/python/3.10.11/Python-3.10.11.tgz --no-check-certificate\n")])])]),t("h3",{attrs:{id:"_2-安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-安装"}},[s._v("#")]),s._v(" 2. 安装")]),s._v(" "),t("ul",[t("li",[s._v("解压")])]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 解压")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("tar")]),s._v("\t"),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-zxvf")]),s._v(" Python-3.10.11.tgz\n")])])]),t("ul",[t("li",[t("p",[s._v("有两种方式来指定 openssl 的安装路径：")]),s._v(" "),t("blockquote",[t("p",[t("strong",[s._v("注意")]),s._v("：使用 "),t("code",[s._v("--enable-optimizations")]),s._v(" 参数可能会出现各种问题，不建议使用这个参数。")])]),s._v(" "),t("ol",[t("li",[t("p",[s._v("修改 python 3.10路径下的Module/Setup 文件：")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("编辑 python 3.10解压路径下的 Module/Setup 文件：")])]),s._v(" "),t("li",[t("p",[s._v("修改如下行的内容（取消注释掉这五行）：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /opt/soft/python-3.10/\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("vi")]),s._v(" Module/Setup\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Socket module helper for socket(2)")]),s._v("\n_socket socketmodule.c\t\t\t\t\t\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 大约在206行,")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Socket module helper for SSL support; you must comment out the other")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# socket line above, and edit the OPENSSL variable:")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("OPENSSL")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/openssl\t\t\t\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 修改升级后的位置")]),s._v("\n_ssl _ssl.c "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消注释")]),s._v("\n    -I"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("OPENSSL"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/include -L"),t("span",{pre:!0,attrs:{class:"token variable"}},[t("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$(")]),s._v("OPENSSL"),t("span",{pre:!0,attrs:{class:"token variable"}},[s._v(")")])]),s._v("/lib "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("  \t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看openssl安装路径下lib，如果为lib64则修改为lib64")]),s._v("\n    "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lssl")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-lcrypto")]),s._v("\t\t\t\t\t\t\t\t\t\t\t\t\t\t"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 取消注释")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#_hashlib _hashopenssl.c \\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     -I$(OPENSSL)/include -L$(OPENSSL)/lib \\")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#     -lcrypto")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("正常编译安装：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./configure "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/python/3.10/ --enable-shared\n")])])])])])]),s._v(" "),t("li",[t("p",[s._v("使用 "),t("code",[s._v("--with-openssl")]),s._v("  和"),t("code",[s._v("--with-openssl-rpath=auto")]),s._v(" 来指定 openssl 的路径，方法如下：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("./configure "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("--prefix")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/python/3.10/ --with-openssl"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/usr/local/openssl/ --with-openssl-rpath"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("auto --enable-shared\n")])])])])])]),s._v(" "),t("li",[t("p",[s._v("编译安装：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("make")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-j4")]),s._v("\n")])])])]),s._v(" "),t("li",[t("p",[s._v("添加软连接：")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/python/3.10/bin/python3. /usr/bin/python3\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ln")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" /usr/local/python3/3.10/bin/pip3 /usr/bin/pip3\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/usr/local/python3/3.10/lib"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("/etc/ld.so.conf.d/python3.conf\nldconfig\n")])])])]),s._v(" "),t("li",[t("p",[s._v("测试")]),s._v(" "),t("div",{staticClass:"language-shell extra-class"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mmrpatroni2 python-3.10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python3 -V")]),s._v("\nPython "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".11\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 测试 openssl")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@mmrpatroni2 python-3.10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# python3")]),s._v("\nPython "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.10")]),s._v(".11 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main, Apr "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("18")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2023")]),s._v(", 09:44:09"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("GCC "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.8")]),s._v(".5 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("20150623")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Red Hat "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.8")]),s._v(".5-44"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" on linux\nType "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"help"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"copyright"')]),s._v(", "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"credits"')]),s._v(" or "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"license"')]),s._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" information.\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" ssl\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("import")]),s._v(" _ssl\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" \n")])])])])])])}),[],!1,null,null,null);t.default=n.exports}}]);